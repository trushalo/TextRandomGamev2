<!DOCTYPE html>
  
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  
    <title>721 test in file</title>
    <style>
body {background-color: Grey}

#stats-area {
  display: flex;
 /* background-image: Black;*/
  color: White;
  margin: 10px;
  padding: 10px;
  font-size: 10px;
  float: right;
  justify-content: space-between;
  flex-wrap: wrap;
  flex: 0 24%;
}

.flex-container {
  display: flex;
  background-color: rgb(65, 65, 68);;
  color: White;
  margin: 10px;
  padding: 10px;
  font-size: 16px;
  flex-direction: column;

  
}

#choices {
  display: flex;
  flex: flex-grow;
  flex-basis: 75%;
  flex-direction: column;
}

    </style>
  </head>
  
  <body>
    

  <div class=flex-container id="flextxt">
    <div id = "stats-area">
    </div>
    
  <p id = "eventtxt">You're standing in a busy metal bay. You can see some boxy looking ships undergoing maintenance. 
    The big ones are corporate ships. Which corporation? Who knows? They don't bother putting advertising labels on vessels that no one of importance sees.
  The smaller ships are a little sleeker and range from cargo-haulers, to mining ships, to clippers. If this were a nicer spaceport you might see luxury vessels or military vessels but here any heavily armed vessel would stand out as a pirate and be destroyed before approach by the mining station's missile arrays or flak cannons.
Still, you are here for a reason. What are you going to do?</p>
  
  <div id=choices>
<button id="button1">Survey the ships carefully. You're looking for a vessel without much security and clearly empty. You spot a vessel that could be charitably described as looking like a giant toaster marinated in guacomole with an old security system that you recognize. It seems well maintained enough; you'd be willing to put even odds you could fly it out of here. Do you want to steal it?</button><br>
<button id="button2">Walk down to the merchant on the other end of the bay. They are selling an array of vessels with standard used ship sales guano. You've put away every penny you could earn for ten years to get off this shithole station. If you start out in a piece of shit ship it'll still be worth it.</button><br>
<button id="button3">Walk down to the merchant on the other end of the bay. They are selling an array of vessels with standard used ship sales guano. You emptied your ex's bank accounts and have enough to buy a cheap ship. You'll be flying in a piece of shit but it'll be more comfortable than being sent to the mining facilities for debt like your ex.</button><br>
<button id="button4">Run quickly to the merchant at the other end of the bay. Buy a fast ship, fast. You got "lucky" today and found out you could drain a fully loaded account at the corporation where you work; used to work. Now you have 20 years of salary in your pocket and a slight chance of living through the week on this station. Blowing every stolen credit on the fastest ship is your best chance of staying corporeal.</button><br>
</div>
</div>
    
    <script>
    var statsAreaElement = document.getElementById("stats-area")
    
    let statNames = ["Build: ", "Create: ", "Know: ", "Persuade: ", "Focus: ", "Integrity: ", "Health: ", "Wealth: "];
    
    let currentStats = [
      randomIntFromInterval(0,3), //build
      randomIntFromInterval(0,3), //create
      randomIntFromInterval(0,3), //know
      randomIntFromInterval(0,3), //persuade
      randomIntFromInterval(0,3),//focus
      0, //integrity
      10, //health
      0 //wealth
    ];
    
    let tools = [
      {name: 'handheld scanner',
    owned: false,
    description: 'This is an old scanner used to detect anything and everything. It is very useful but a little bulky and expensive.',
    available: false}
    ]
    
    
    
    let ships = []
    
    let ship = []
  

    let invisibleStats = [
      {heat: 0},
      {corporateStatus: 0}
    ]
    
    startGame()
    
//Startgame function

function startGame()
{
  
}

    
    function questSelect() 
    {
      
      
    }

    function optionSelect()
     {

     }
     
     class OptionClick {
       constructor(displayText, optionArray) {
         this.displayText = displayText;
         this.optionArray = optionArray;
//SECTION OF THE OBJECT IN TEST BELOW THIS LINE 07/27/2021
document.getElementById("button1").addEventListener("click", function () {
  document.getElementById().innerHTML = this.displayText;
  let optionLimitArray = getRandom(this.optionArray, 4)
document.getElementById("button1").innerHTML = optionLimitArray[0].text;
document.getElementById("button2").innerHTML = optionLimitArray[1].text;
document.getElementById("button3").innerHTML = optionLimitArray[2].text;
document.getElementById("button4").innerHTML = optionLimitArray[3].text;
});

         
};
};

     //Introduction scene
     let optionNewShip = new OptionClick ('You have a new ship')
     let option0 = new OptionClick ("The merchant pitches an array of ships at you. You weed out the ones way outside your budget to the following. What do you do?",
     [{text: 'Fast ship with guns and no cargo' 
      , nextNode: optionNewShip
      , cost: 8
      , ship: 'interceptor1'}, 
     {text: 'Discount courier shuttle'
      , nextNode: optionNewShip
      , cost: 6
      , ship: "shuttle1"}, 
     {text: 'Rickety freighter'
     , nextNode: optionNewShip
     , cost: 10
     , ship: 'freighter1'},
     {text: 'Mining ship'
     , nextNode: optionNewShip
     , ship: 'miner1'}])

     let option2 = new OptionClick ()
     let option3 = new OptionClick ()
     let option4 = new OptionClick ()
     let option5 = new OptionClick ()
     let option6 = new OptionClick ()
     let option7 = new OptionClick ()

     let option1 = new OptionClick ("You walk toward the disgusting looking ship. It isn't actually as bad as it looks, even if it is so pocked and putrifying that it makes you a little sick. The engine is class 2, it has a basic mining grapple, the engine apparatus looks unlikely to explode, and the pock marks are mainly just dents in a tritanium alloy armor. There just are not any nicities or flourishes and that includes a defense system. There is only a standard heavy duty padlock. What do you do?",
     [{text: 'Take a swig of the ethanol in your flask and grab the welder laying on the floor. Act like you are just doing regular maintenance as you melt that padlock away then walk inside, request departure from control and fly off the station.' 
      , nextNode: option5
      , risk: -3
      , stat: 4}, 
     {text: 'Take a seat reading a book and wait patiently until the bay area looks clear. Go up and take a few precesion photos of the locking mechanism and come back to ask a few acquaintances to take a look at the lock and recommend the best way to break it.'
      , nextNode: option6
      , risk: 0
      , stat: 3}, 
     {text: 'Take out the somewhat bulky all-purpose scanner from your bag. It cost you half a year of labor (2 kilocreds). If someone sees you it will look suspicious but the scanner will tell if anyone is inside and get you the composition of the lock to see if you could break it with the other tools in the bag.'
     , nextNode: option4
     , risk: 2
     , stat: 3},
     {text: 'Screw it, this is too risky. You have some money saved up. You walk toward the merchant to buy a cheaper ship without starting your spacefaring career with a theft.'
     , nextNode: option0}])




  
document.getElementById("button1").addEventListener("click", function () {
  document.getElementById("eventtxt").innerHTML = option1.displayText;
  let optionLimitArray = getRandom(option1.optionArray, 4)
document.getElementById("button1").innerHTML = optionLimitArray[0].text;
document.getElementById("button2").innerHTML = optionLimitArray[1].text;
document.getElementById("button3").innerHTML = optionLimitArray[2].text;
document.getElementById("button4").innerHTML = optionLimitArray[3].text;
});

/*     function showTextNode(textNodeIndex) {
  const textNode = textNodes.find(textNode => textNode.id === textNodeIndex)
  textElement.innerText = textNode.text;
  while (optionButtonsElement.firstChild) {
    optionButtonsElement.removeChild(optionButtonsElement.firstChild)
  };
    textNode.options.forEach(option => {
    if (showOption(option)) {
      const button = document.createElement('button')
      button.innerText = option.text
      button.classList.add('btn')
      button.addEventListener('click', () => selectOption(option))
      optionButtonsElement.appendChild(button)
    };
  });
}

function showOption(option) {
  return option.requiredState == null || option.requiredState(state)
}
  
  */

//use getRandom(arr, n) to pull only n number of items from an array
function getRandom(arr, n) {
    var result = new Array(n),
        len = arr.length,
        taken = new Array(len);
    if (n > len)
        throw new RangeError("getRandom: more elements taken than available");
    while (n--) {
        var x = Math.floor(Math.random() * len);
        result[n] = arr[x in taken ? taken[x] : x];
        taken[x] = --len in taken ? taken[len] : len;
    }
    return result;
}
    
function randomIntFromInterval(min, max) { // min and max included 
  return Math.floor(Math.random() * (max - min + 1) + min);
}

function choiceRoll(mod){
  return (randomIntFromInterval(1,6) + randomIntFromInterval(1,6) + currentStats[mod]) - 2
};
/*function testRand() {
for(let i = 4; i>=0; i--)
{
 console.log(choiceRoll(currentStats[i]) +" " + statNames[i] + currentStats[i])
}
}

testRand()*/


//console.log(choiceRoll(2))


//let testarray = ['hap','py','day','s','are','here','a','gain','!',9]
//console.log(getRandom(testarray,4))

function statsRefresh() 
{statsAreaElement.innerHTML=""
    for(let i = 0; i < currentStats.length; i++)
    {
    statsAreaElement.innerHTML+=("<div>" + statNames[i] + currentStats[i] + "</div>")
    }
    }

    statsRefresh()
    </script>
    </body>
 
